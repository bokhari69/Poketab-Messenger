"use strict";const socket=io("/auth"),nextbtn=document.getElementById("next"),clickSound=new Audio("/sounds/click.mp3"),form1=document.getElementById("form1"),form2=document.getElementById("form2"),howto=document.querySelector(".howtouse"),enter=document.getElementById("enter"),keyformat=/^[a-zA-Z0-9]{3}-[a-zA-Z0-9]{3}-[a-zA-Z0-9]{3}-[a-zA-Z0-9]{3}$/,usernameformat=/^[a-zA-Z0-9\u0980-\u09FF]{3,20}$/;let e_users=[];function validateKey(){let key=document.getElementById("key").value;return 0==key.length?(document.getElementById("key").focus(),errlog("keyErr","*Key is required"),!1):!!keyformat.test(key)||(document.getElementById("key").focus(),errlog("keyErr","*Key is not valid"),!1)}function validateUser(){let username=document.getElementById("username").value,radios=document.getElementsByName("avatar"),checked=!1;for(var i=0;i<radios.length;i++)if(radios[i].checked){checked=!0;break}return 0==username.length?(document.getElementById("username").focus(),errlog("usernameErr","*Username is required"),!1):username.length<3||username.length>20?(document.getElementById("username").focus(),errlog("usernameErr","*Name must be between 3 and 20 characters"),!1):usernameformat.test(username)?e_users.includes(username)?(document.getElementById("username").focus(),errlog("usernameErr",'Username exists <i class="fa-solid fa-triangle-exclamation" style="color: orange;"></i>'),!1):checked||(errlog("avatarErr","*Avatar is required"),!1):(document.getElementById("username").focus(),errlog("usernameErr","*Cannot contain special charecters or space"),!1)}function check(){return document.querySelectorAll(".errLog").forEach(elem=>{elem.textContent=""}),validateKey()&&validateUser()&&(document.getElementById("enter").innerHTML='Please Wait <i class="fa-solid fa-circle-notch fa-spin"></i>'),validateKey()&&validateUser()}let errTimeout=void 0;function errlog(id,msg){let err=document.getElementById(id);err.innerHTML=msg,err.classList.add("shake"),null==errTimeout&&(errTimeout=setTimeout(()=>{err.classList.remove("shake"),errTimeout=void 0},500))}function wait(){let wait;document.getElementById("wait").style.display="flex"}document.getElementById("form").onsubmit=check,document.getElementById("redirect").onclick=wait,document.documentElement.style.setProperty("--height",window.innerHeight+"px"),window.addEventListener("offline",(function(){console.log("offline"),document.querySelector(".offline").textContent="You are offline!",document.querySelector(".offline").classList.add("active"),document.querySelector(".offline").style.background="orangered"})),window.addEventListener("contextmenu",e=>{e.preventDefault()}),window.addEventListener("online",(function(){console.log("Back to online"),document.querySelector(".offline").textContent="Back to online!",document.querySelector(".offline").style.background="limegreen",setTimeout(()=>{document.querySelector(".offline").classList.remove("active")},1500)})),"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("./serviceWorkerPoketabS.min.js").then(()=>{console.log("Service Worker Registered")}).catch(err=>console.log(`Service Worker: Error ${err}`))}),document.querySelectorAll(".clickable").forEach(elem=>{elem.addEventListener("click",()=>{clickSound.currentTime=0,clickSound.play()})});