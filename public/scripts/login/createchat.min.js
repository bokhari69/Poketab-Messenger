import{check,errlog}from"./common.min.js";const errorSound=new Audio("/sounds/error.mp3"),form=document.getElementById("form"),maxuser=document.getElementById("maxuser");function remainingTime(totalTime,elapsedTime){const remaining=Math.floor(totalTime)-Math.floor(elapsedTime),minutes=Math.floor(remaining/60),seconds=Math.floor(remaining%60);return minutes.toString().padStart(2,"0")+":"+seconds.toString().padStart(2,"0")}maxuser.addEventListener("input",()=>{document.getElementById("rangeValue").textContent=maxuser.value}),form.addEventListener("submit",async e=>{e.preventDefault(),await check()&&form.submit()});const timerElem=document.querySelector(".remainingTime");let elapsedTime=1,addedShake=!1;const timeCount=120;let timer=setInterval(()=>{if(elapsedTime>=110&&!addedShake&&(timerElem.classList.add("shake"),timerElem.style.color="#ff2a20",addedShake=!0),elapsedTime>=120){errorSound.play(),timerElem.classList.remove("shake");const btn=document.getElementById("enter");btn.innerHTML='Renew session <i class="fa-solid fa-rotate-right"></i>',btn.style.background="#ff2a20",clearInterval(timer),timer=void 0,errlog("usernameErr",'Session expired <i class="fa-solid fa-triangle-exclamation"></i>'),btn.onclick=()=>{btn.innerHTML='Please wait <i class="fa-solid fa-rotate-right fa-spin"></i>',location.reload()}}timerElem.textContent=remainingTime(120,elapsedTime++)},1e3);console.log("%ccreatechat.js loaded","color: limegreen;");